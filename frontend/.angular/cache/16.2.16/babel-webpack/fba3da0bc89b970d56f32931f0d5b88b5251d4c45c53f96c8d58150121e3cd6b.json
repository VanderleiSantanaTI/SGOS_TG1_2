{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Teste/Documents/GitHub/SGOS_TG1_2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common/http\";\nimport * as i5 from \"@angular/common\";\nfunction LoginFormComponent_ion_spinner_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-spinner\", 29);\n  }\n}\nlet LoginFormComponent = /*#__PURE__*/(() => {\n  class LoginFormComponent {\n    constructor(formBuilder, router, toastController, http) {\n      this.formBuilder = formBuilder;\n      this.router = router;\n      this.toastController = toastController;\n      this.http = http;\n      this.loading = false;\n      this.showPassword = false;\n      this.loginForm = this.createForm();\n    }\n    ngOnInit() {}\n    createForm() {\n      return this.formBuilder.group({\n        username: ['admin', [Validators.required]],\n        password: ['admin123', [Validators.required]]\n      });\n    }\n    onLogin() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (_this.loginForm.valid) {\n          _this.loading = true;\n          try {\n            const credentials = _this.loginForm.value;\n            const response = yield _this.http.post('http://localhost:8000/api/v1/auth/login', credentials).toPromise();\n            console.log('Login response:', response);\n            if (response && (response.status === 'success' || response.success)) {\n              yield _this.showSuccessToast('Login realizado com sucesso!');\n              // Store token and user data\n              if (response.data?.access_token) {\n                localStorage.setItem('sgos_token', response.data.access_token);\n                localStorage.setItem('sgos_user', JSON.stringify(response.data.user));\n              }\n              // Navigate to dashboard\n              yield _this.router.navigate(['/dashboard']);\n            } else {\n              throw new Error(response?.message || 'Erro no login');\n            }\n          } catch (error) {\n            console.error('Login error:', error);\n            yield _this.showErrorToast(error.message || 'Erro ao fazer login');\n          } finally {\n            _this.loading = false;\n          }\n        }\n      })();\n    }\n    quickLogin(role) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const credentials = {\n          admin: {\n            username: 'admin',\n            password: 'admin123'\n          },\n          mecanico: {\n            username: 'mecanico1',\n            password: 'mecanico123'\n          },\n          supervisor: {\n            username: 'supervisor',\n            password: 'supervisor123'\n          },\n          usuario: {\n            username: 'usuario',\n            password: 'usuario123'\n          }\n        };\n        _this2.loginForm.patchValue(credentials[role]);\n        yield _this2.onLogin();\n      })();\n    }\n    togglePasswordVisibility() {\n      this.showPassword = !this.showPassword;\n    }\n    goToForgotPassword() {\n      this.router.navigate(['/forgot-password']);\n    }\n    showSuccessToast(message) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const toast = yield _this3.toastController.create({\n          message,\n          duration: 3000,\n          position: 'top',\n          color: 'success'\n        });\n        yield toast.present();\n      })();\n    }\n    showErrorToast(message) {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        const toast = yield _this4.toastController.create({\n          message,\n          duration: 4000,\n          position: 'top',\n          color: 'danger'\n        });\n        yield toast.present();\n      })();\n    }\n    getErrorMessage(controlName) {\n      return '';\n    }\n    hasError(controlName) {\n      return false;\n    }\n    static {\n      this.ɵfac = function LoginFormComponent_Factory(t) {\n        return new (t || LoginFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ToastController), i0.ɵɵdirectiveInject(i4.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginFormComponent,\n        selectors: [[\"app-login-form\"]],\n        decls: 53,\n        vars: 7,\n        consts: [[1, \"login-content\", 3, \"fullscreen\"], [1, \"login-container\", \"responsive-container\"], [1, \"login-header\"], [1, \"logo-container\"], [\"name\", \"construct\", 1, \"logo-icon\"], [1, \"subtitle\"], [1, \"login-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-card\"], [1, \"form-group\"], [\"fill\", \"outline\", 1, \"custom-item\"], [\"name\", \"person-outline\", \"slot\", \"start\"], [\"position\", \"stacked\"], [\"formControlName\", \"username\", \"type\", \"text\", \"placeholder\", \"Digite seu usu\\u00E1rio\"], [\"name\", \"lock-closed-outline\", \"slot\", \"start\"], [\"formControlName\", \"password\", \"placeholder\", \"Digite sua senha\", 3, \"type\"], [\"fill\", \"clear\", \"slot\", \"end\", 3, \"click\"], [\"slot\", \"icon-only\", 3, \"name\"], [\"type\", \"submit\", \"expand\", \"block\", 1, \"login-button\", 3, \"disabled\"], [\"name\", \"crescent\", \"slot\", \"start\", 4, \"ngIf\"], [1, \"demo-section\"], [1, \"demo-card\"], [1, \"demo-title\"], [\"name\", \"flash-outline\"], [1, \"demo-buttons\"], [\"fill\", \"outline\", \"size\", \"small\", 1, \"demo-button\", 3, \"click\"], [\"name\", \"shield-outline\", \"slot\", \"start\"], [\"name\", \"people-outline\", \"slot\", \"start\"], [\"name\", \"construct-outline\", \"slot\", \"start\"], [1, \"login-footer\"], [\"name\", \"crescent\", \"slot\", \"start\"]],\n        template: function LoginFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"ion-content\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n            i0.ɵɵelement(4, \"ion-icon\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"h1\");\n            i0.ɵɵtext(6, \"SGOS\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"p\", 5);\n            i0.ɵɵtext(8, \"Sistema de Gerenciamento de Ordem de Servi\\u00E7o\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"form\", 6);\n            i0.ɵɵlistener(\"ngSubmit\", function LoginFormComponent_Template_form_ngSubmit_9_listener() {\n              return ctx.onLogin();\n            });\n            i0.ɵɵelementStart(10, \"ion-card\", 7)(11, \"ion-card-content\")(12, \"div\", 8)(13, \"ion-item\", 9);\n            i0.ɵɵelement(14, \"ion-icon\", 10);\n            i0.ɵɵelementStart(15, \"ion-label\", 11);\n            i0.ɵɵtext(16, \"Usu\\u00E1rio\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(17, \"ion-input\", 12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"div\", 8)(19, \"ion-item\", 9);\n            i0.ɵɵelement(20, \"ion-icon\", 13);\n            i0.ɵɵelementStart(21, \"ion-label\", 11);\n            i0.ɵɵtext(22, \"Senha\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(23, \"ion-input\", 14);\n            i0.ɵɵelementStart(24, \"ion-button\", 15);\n            i0.ɵɵlistener(\"click\", function LoginFormComponent_Template_ion_button_click_24_listener() {\n              return ctx.togglePasswordVisibility();\n            });\n            i0.ɵɵelement(25, \"ion-icon\", 16);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(26, \"div\", 8)(27, \"ion-button\", 17);\n            i0.ɵɵtemplate(28, LoginFormComponent_ion_spinner_28_Template, 1, 0, \"ion-spinner\", 18);\n            i0.ɵɵtext(29);\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(30, \"div\", 19)(31, \"ion-card\", 20)(32, \"ion-card-header\")(33, \"ion-card-title\", 21);\n            i0.ɵɵelement(34, \"ion-icon\", 22);\n            i0.ɵɵtext(35, \" Login R\\u00E1pido (Demo) \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(36, \"ion-card-content\")(37, \"div\", 23)(38, \"ion-button\", 24);\n            i0.ɵɵlistener(\"click\", function LoginFormComponent_Template_ion_button_click_38_listener() {\n              return ctx.quickLogin(\"admin\");\n            });\n            i0.ɵɵelement(39, \"ion-icon\", 25);\n            i0.ɵɵtext(40, \" Admin \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(41, \"ion-button\", 24);\n            i0.ɵɵlistener(\"click\", function LoginFormComponent_Template_ion_button_click_41_listener() {\n              return ctx.quickLogin(\"supervisor\");\n            });\n            i0.ɵɵelement(42, \"ion-icon\", 26);\n            i0.ɵɵtext(43, \" Supervisor \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(44, \"ion-button\", 24);\n            i0.ɵɵlistener(\"click\", function LoginFormComponent_Template_ion_button_click_44_listener() {\n              return ctx.quickLogin(\"mecanico\");\n            });\n            i0.ɵɵelement(45, \"ion-icon\", 27);\n            i0.ɵɵtext(46, \" Mec\\u00E2nico \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(47, \"ion-button\", 24);\n            i0.ɵɵlistener(\"click\", function LoginFormComponent_Template_ion_button_click_47_listener() {\n              return ctx.quickLogin(\"usuario\");\n            });\n            i0.ɵɵelement(48, \"ion-icon\", 10);\n            i0.ɵɵtext(49, \" Usu\\u00E1rio \");\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(50, \"div\", 28)(51, \"p\");\n            i0.ɵɵtext(52, \"\\u00A9 2024 SGOS. Todos os direitos reservados.\");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"fullscreen\", true);\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n            i0.ɵɵadvance(14);\n            i0.ɵɵproperty(\"type\", ctx.showPassword ? \"text\" : \"password\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"name\", ctx.showPassword ? \"eye-off-outline\" : \"eye-outline\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.loading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Entrando...\" : \"Entrar\", \" \");\n          }\n        },\n        dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.IonButton, i3.IonCard, i3.IonCardContent, i3.IonCardHeader, i3.IonCardTitle, i3.IonContent, i3.IonIcon, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonSpinner, i3.TextValueAccessor],\n        styles: [\".login-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}.login-container[_ngcontent-%COMP%]{width:100%;max-width:400px}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;color:#fff}.login-header[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{margin-bottom:16px}.login-header[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:64px;color:#fff;filter:drop-shadow(0 4px 8px rgba(0,0,0,.2))}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin:0 0 8px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.login-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px;margin:0;opacity:.9;font-weight:300}.login-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;box-shadow:0 8px 32px #0000001a;margin:0}.login-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:24px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .8);--border-radius: 12px;--padding-start: 16px;margin-bottom:8px;border:1px solid rgba(0,0,0,.1)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]:focus-within{border-color:var(--ion-color-primary);box-shadow:0 0 0 3px rgba(var(--ion-color-primary-rgb),.1)}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{--border-radius: 12px;height:48px;font-weight:600;font-size:16px}.demo-section[_ngcontent-%COMP%]{margin-top:24px}.demo-section[_ngcontent-%COMP%]   .demo-card[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;border:1px solid rgba(255,255,255,.2);margin:0}.demo-section[_ngcontent-%COMP%]   .demo-card[_ngcontent-%COMP%]   .demo-title[_ngcontent-%COMP%]{color:#fff;font-size:16px;display:flex;align-items:center;gap:8px;margin:0}.demo-section[_ngcontent-%COMP%]   .demo-card[_ngcontent-%COMP%]   .demo-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:8px}@media (min-width: 768px){.demo-section[_ngcontent-%COMP%]   .demo-card[_ngcontent-%COMP%]   .demo-buttons[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.demo-section[_ngcontent-%COMP%]   .demo-card[_ngcontent-%COMP%]   .demo-buttons[_ngcontent-%COMP%]   .demo-button[_ngcontent-%COMP%]{--border-color: rgba(255, 255, 255, .3);--color: white;--border-radius: 8px;height:40px;font-size:12px}.demo-section[_ngcontent-%COMP%]   .demo-card[_ngcontent-%COMP%]   .demo-buttons[_ngcontent-%COMP%]   .demo-button[_ngcontent-%COMP%]:hover{--background: rgba(255, 255, 255, .1)}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:32px;color:#ffffffb3}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin:0}\"]\n      });\n    }\n  }\n  return LoginFormComponent;\n})();\nexport { LoginFormComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}